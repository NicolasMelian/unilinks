import{Q as U,c as g,T as x,p as E,o as r,a as i,b as S,d as e,e as V,f,v as _,u as t,t as d,g as c,F as h,r as j}from"./app-CVez4sBD.js";import{N as D}from"./Navbar-BRaqbvC4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"flex flex-col py-10 text-center justify-center mx-auto max-w-4xl"},$=e("h1",{class:"text-2xl mt-6 mb-6 font-bold"},"Links",-1),F={class:"w-full"},B=e("p",null,"Name:",-1),M={key:0},R=e("p",null,"Url:",-1),T={key:0},A=e("p",null,"Image(optional):",-1),P=["value"],Q={class:"flex items-center content-center justify-center mt-6"},Y=["disabled"],q={class:"mt-16 w-full items-center justify-center"},z={key:0},G=e("p",{class:"text-lg font-bold mb-6"},"Your Links:",-1),H={key:0,class:"flex flex-col items-center justify-center mx-auto"},J={class:"flex gap-2 mr-4"},K={key:0},O={key:1},W={class:"flex gap-2 mt-2"},X=["onClick"],Z={key:1,class:"flex mb-6"},ee={class:"flex ml-24 w-full gap-2 items-center"},te=["src"],se={class:"mr-4 ml-2"},ne=["href"],le={class:"flex items-center mr-2"},oe=["onClick"],re=["onClick"],ie={key:1},me={__name:"Links",setup(ae){const b=U(),m=g(()=>b.props.auth.user),k=g(()=>m.value?m.value.links:[]),n=x({name:"",url:"",image:null}),s=x({id:null,name:"",url:"",image:null}),p=E(null);function y(){n.post("/links",{preserveScroll:!0,onSuccess:()=>{n.reset(),v()},onError:()=>{console.error("Error submitting the form")}})}function w(a){n.delete(`/links/${a}`,{onSuccess:()=>{v()}})}function L(a){p.value=a.id,s.id=a.id,s.name=a.name,s.url=a.url,s.image=null}function C(a){const l=new FormData;l.append("name",s.name),l.append("url",s.url),s.image&&l.append("image",s.image),s.post(`/links/${a}`,{preserveScroll:!0,onSuccess:()=>{p.value=null,s.reset(),v()},onError:()=>{console.error("Error updating the form")}})}function N(){p.value=null,s.reset()}function v(){b.props.links=m.value.links}return(a,l)=>(r(),i(h,null,[S(D),e("div",I,[$,e("div",F,[e("form",{onSubmit:V(y,["prevent"]),class:"flex justify-center items-center gap-2"},[e("div",null,[B,f(e("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>t(n).name=o),placeholder:"Link Name",class:"input input-bordered w-full max-w-xs"},null,512),[[_,t(n).name]]),t(n).errors.name?(r(),i("div",M,d(t(n).errors.name),1)):c("",!0)]),e("div",null,[R,f(e("input",{"onUpdate:modelValue":l[1]||(l[1]=o=>t(n).url=o),placeholder:"URL",class:"input input-bordered w-full max-w-xs"},null,512),[[_,t(n).url]]),t(n).errors.url?(r(),i("div",T,d(t(n).errors.url),1)):c("",!0)]),e("div",null,[A,e("input",{type:"file",class:"file-input file-input-bordered w-full max-w-xs",onInput:l[2]||(l[2]=o=>t(n).image=o.target.files[0])},null,32)]),t(n).progress?(r(),i("progress",{key:0,value:t(n).progress.percentage,max:"100"},d(t(n).progress.percentage)+"% ",9,P)):c("",!0),e("div",Q,[e("button",{type:"submit",disabled:t(n).processing,class:"btn btn-outline mr-3"}," Add Link ",8,Y)])],32)]),e("div",q,[m.value?(r(),i("div",z,[G,e("ul",null,[(r(!0),i(h,null,j(k.value,o=>(r(),i("li",{key:o.id},[p.value===o.id?(r(),i("div",H,[e("div",J,[f(e("input",{"onUpdate:modelValue":l[3]||(l[3]=u=>t(s).name=u),placeholder:"Link Name",class:"file-input file-input-bordered max-w-xs"},null,512),[[_,t(s).name]]),t(s).errors.name?(r(),i("div",K,d(t(s).errors.name),1)):c("",!0),f(e("input",{"onUpdate:modelValue":l[4]||(l[4]=u=>t(s).url=u),placeholder:"URL",class:"file-input file-input-bordered max-w-xs"},null,512),[[_,t(s).url]]),t(s).errors.url?(r(),i("div",O,d(t(s).errors.url),1)):c("",!0),e("input",{type:"file",onInput:l[5]||(l[5]=u=>t(s).image=u.target.files[0]),class:"file-input file-input-bordered w-full max-w-xs"},null,32)]),e("div",W,[e("button",{onClick:u=>C(o.id),class:"btn btn-outline"},"Update",8,X),e("button",{onClick:N,class:"btn btn-error"},"Cancel")])])):(r(),i("div",Z,[e("div",ee,[o.image?(r(),i("img",{key:0,src:o.image,class:"w-16 h-16 rounded-full object-cover",alt:"Link Image"},null,8,te)):c("",!0),e("p",se,d(o.name),1),e("a",{href:o.url,class:"mr-4"},d(o.url),9,ne)]),e("div",le,[e("button",{onClick:u=>L(o),class:"btn btn-outline mr-3"},"Edit",8,oe),e("button",{onClick:u=>w(o.id),class:"btn btn-error"},"Delete",8,re)])]))]))),128))])])):(r(),i("div",ie," Please log in to view links. "))])])],64))}};export{me as default};
