import{Q as U,c as b,T as g,p as E,o as r,a as i,b as e,d as S,e as f,v as _,u as t,t as d,f as c,F as j,r as V}from"./app-Bf6UDT30.js";const D={class:"flex flex-col py-10 text-center justify-center mx-auto max-w-4xl"},I=e("h1",{class:"text-2xl mt-6 mb-6 font-bold"},"Links",-1),N={class:"w-full"},$=e("p",null,"Name:",-1),F={key:0},B=e("p",null,"Url:",-1),M={key:0},R=e("p",null,"Image(optional):",-1),T=["value"],A={class:"flex items-center content-center justify-center mt-6"},P=["disabled"],Q={class:"mt-16 w-full items-center justify-center"},Y={key:0},q=e("p",{class:"text-lg font-bold mb-6"},"Your Links:",-1),z={key:0,class:"flex flex-col items-center justify-center mx-auto"},G={class:"flex gap-2 mr-4"},H={key:0},J={key:1},K={class:"flex gap-2 mt-2"},O=["onClick"],W={key:1,class:"flex mb-6"},X={class:"flex ml-24 w-full gap-2 items-center"},Z=["src"],ee={class:"mr-4 ml-2"},te=["href"],se={class:"flex items-center mr-2"},ne=["onClick"],le=["onClick"],oe={key:1},ue={__name:"Links",setup(re){const x=U(),m=b(()=>x.props.auth.user),h=b(()=>m.value?m.value.links:[]),n=g({name:"",url:"",image:null}),s=g({id:null,name:"",url:"",image:null}),p=E(null);function k(){n.post("/links",{preserveScroll:!0,onSuccess:()=>{n.reset(),v()},onError:()=>{console.error("Error submitting the form")}})}function y(u){n.delete(`/links/${u}`,{onSuccess:()=>{v()}})}function w(u){p.value=u.id,s.id=u.id,s.name=u.name,s.url=u.url,s.image=null}function L(u){const l=new FormData;l.append("name",s.name),l.append("url",s.url),s.image&&l.append("image",s.image),s.post(`/links/${u}`,{preserveScroll:!0,onSuccess:()=>{p.value=null,s.reset(),v()},onError:()=>{console.error("Error updating the form")}})}function C(){p.value=null,s.reset()}function v(){x.props.links=m.value.links}return(u,l)=>(r(),i("div",D,[I,e("div",N,[e("form",{onSubmit:S(k,["prevent"]),class:"flex justify-center items-center gap-2"},[e("div",null,[$,f(e("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>t(n).name=o),placeholder:"Link Name",class:"input input-bordered w-full max-w-xs"},null,512),[[_,t(n).name]]),t(n).errors.name?(r(),i("div",F,d(t(n).errors.name),1)):c("",!0)]),e("div",null,[B,f(e("input",{"onUpdate:modelValue":l[1]||(l[1]=o=>t(n).url=o),placeholder:"URL",class:"input input-bordered w-full max-w-xs"},null,512),[[_,t(n).url]]),t(n).errors.url?(r(),i("div",M,d(t(n).errors.url),1)):c("",!0)]),e("div",null,[R,e("input",{type:"file",class:"file-input file-input-bordered w-full max-w-xs",onInput:l[2]||(l[2]=o=>t(n).image=o.target.files[0])},null,32)]),t(n).progress?(r(),i("progress",{key:0,value:t(n).progress.percentage,max:"100"},d(t(n).progress.percentage)+"% ",9,T)):c("",!0),e("div",A,[e("button",{type:"submit",disabled:t(n).processing,class:"btn btn-outline mr-3"}," Add Link ",8,P)])],32)]),e("div",Q,[m.value?(r(),i("div",Y,[q,e("ul",null,[(r(!0),i(j,null,V(h.value,o=>(r(),i("li",{key:o.id},[p.value===o.id?(r(),i("div",z,[e("div",G,[f(e("input",{"onUpdate:modelValue":l[3]||(l[3]=a=>t(s).name=a),placeholder:"Link Name",class:"file-input file-input-bordered max-w-xs"},null,512),[[_,t(s).name]]),t(s).errors.name?(r(),i("div",H,d(t(s).errors.name),1)):c("",!0),f(e("input",{"onUpdate:modelValue":l[4]||(l[4]=a=>t(s).url=a),placeholder:"URL",class:"file-input file-input-bordered max-w-xs"},null,512),[[_,t(s).url]]),t(s).errors.url?(r(),i("div",J,d(t(s).errors.url),1)):c("",!0),e("input",{type:"file",onInput:l[5]||(l[5]=a=>t(s).image=a.target.files[0]),class:"file-input file-input-bordered w-full max-w-xs"},null,32)]),e("div",K,[e("button",{onClick:a=>L(o.id),class:"btn btn-outline"},"Update",8,O),e("button",{onClick:C,class:"btn btn-error"},"Cancel")])])):(r(),i("div",W,[e("div",X,[o.image?(r(),i("img",{key:0,src:o.image,class:"w-16 h-16 rounded-full object-cover",alt:"Link Image"},null,8,Z)):c("",!0),e("p",ee,d(o.name),1),e("a",{href:o.url,class:"mr-4"},d(o.url),9,te)]),e("div",se,[e("button",{onClick:a=>w(o),class:"btn btn-outline mr-3"},"Edit",8,ne),e("button",{onClick:a=>y(o.id),class:"btn btn-error"},"Delete",8,le)])]))]))),128))])])):(r(),i("div",oe," Please log in to view links. "))])]))}};export{ue as default};
