import{Q as S,c as g,T as h,r as V,o as r,a as i,b as x,u as t,d as e,e as j,f as p,v as f,t as d,g as c,F as b,h as F,Z as N}from"./app-DFKW-8X9.js";import{_ as $}from"./Navbar-DqNiXcwP.js";import{F as D}from"./Footer-CHHdIP6h.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"flex flex-col py-10 text-center justify-center mx-auto max-w-4xl"},B=e("h1",{class:"text-2xl mt-6 mb-6 font-bold"},"Links",-1),M=e("p",{class:"mb-8 text-lg"},"Enter the links you want to appear on your landing page.",-1),R={class:"w-full"},T=e("p",null,"Name:",-1),A={key:0},P=e("p",null,"Url:",-1),Q={key:0},Y=e("p",null,"Image(optional):",-1),Z=["value"],q={class:"flex items-center content-center justify-center mt-6"},z=["disabled"],G={class:"mt-20 w-full items-center justify-center"},H={key:0},J=e("p",{class:"text-xl font-bold mb-6"},"Your Links:",-1),K={key:0,class:"flex flex-col items-center justify-center mx-auto"},O={class:"flex gap-2 mr-4"},W={key:0},X={key:1},ee={class:"flex gap-2 mt-2"},te=["onClick"],se={key:1,class:"flex mb-6"},ne={class:"flex w-full gap-2 items-center"},oe=["src"],le={class:"mr-4 ml-2"},re=["href"],ie={class:"flex items-center mr-2"},ae=["onClick"],ue=["onClick"],de={key:1},ve={__name:"Links",setup(ce){const _=S(),k=g(()=>_.props.auth.user),y=g(()=>_.props.links),n=h({name:"",url:"",image:null}),s=h({id:null,name:"",url:"",image:null}),m=V(null);function w(){n.post("/links",{preserveScroll:!0,onSuccess:()=>{n.reset(),v()},onError:()=>{console.error("Error submitting the form")}})}function L(a){n.delete(`/links/${a}`,{onSuccess:()=>{v()}})}function C(a){m.value=a.id,s.id=a.id,s.name=a.name,s.url=a.url,s.image=null}function E(a){const o=new FormData;o.append("name",s.name),o.append("url",s.url),s.image&&o.append("image",s.image),s.post(`/links/${a}`,{preserveScroll:!0,onSuccess:()=>{m.value=null,s.reset(),v()},onError:()=>{console.error("Error updating the form")}})}function U(){m.value=null,s.reset()}function v(){_.props.links}return(a,o)=>(r(),i(b,null,[x(t(N),{title:"Links"}),x($),e("div",I,[B,M,e("div",R,[e("form",{onSubmit:j(w,["prevent"]),class:"flex justify-center items-center gap-2"},[e("div",null,[T,p(e("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>t(n).name=l),placeholder:"Link Name",class:"input input-bordered w-full max-w-xs"},null,512),[[f,t(n).name]]),t(n).errors.name?(r(),i("div",A,d(t(n).errors.name),1)):c("",!0)]),e("div",null,[P,p(e("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>t(n).url=l),placeholder:"URL",class:"input input-bordered w-full max-w-xs"},null,512),[[f,t(n).url]]),t(n).errors.url?(r(),i("div",Q,d(t(n).errors.url),1)):c("",!0)]),e("div",null,[Y,e("input",{type:"file",class:"file-input file-input-bordered w-full max-w-xs",onInput:o[2]||(o[2]=l=>t(n).image=l.target.files[0])},null,32)]),t(n).progress?(r(),i("progress",{key:0,value:t(n).progress.percentage,max:"100"},d(t(n).progress.percentage)+"% ",9,Z)):c("",!0),e("div",q,[e("button",{type:"submit",disabled:t(n).processing,class:"btn btn-outline mr-3"}," Add Link ",8,z)])],32)]),e("div",G,[k.value?(r(),i("div",H,[J,e("ul",null,[(r(!0),i(b,null,F(y.value,l=>(r(),i("li",{key:l.id},[m.value===l.id?(r(),i("div",K,[e("div",O,[p(e("input",{"onUpdate:modelValue":o[3]||(o[3]=u=>t(s).name=u),placeholder:"Link Name",class:"file-input file-input-bordered max-w-xs"},null,512),[[f,t(s).name]]),t(s).errors.name?(r(),i("div",W,d(t(s).errors.name),1)):c("",!0),p(e("input",{"onUpdate:modelValue":o[4]||(o[4]=u=>t(s).url=u),placeholder:"URL",class:"file-input file-input-bordered max-w-xs"},null,512),[[f,t(s).url]]),t(s).errors.url?(r(),i("div",X,d(t(s).errors.url),1)):c("",!0),e("input",{type:"file",onInput:o[5]||(o[5]=u=>t(s).image=u.target.files[0]),class:"file-input file-input-bordered w-full max-w-xs"},null,32)]),e("div",ee,[e("button",{onClick:u=>E(l.id),class:"btn btn-outline"},"Update",8,te),e("button",{onClick:U,class:"btn btn-error"},"Cancel")])])):(r(),i("div",se,[e("div",ne,[l.image?(r(),i("img",{key:0,src:l.image,class:"w-16 h-16 rounded-full object-cover",alt:"Link Image"},null,8,oe)):c("",!0),e("p",le,d(l.name),1),e("a",{href:l.url,class:"mr-4"},d(l.url),9,re)]),e("div",ie,[e("button",{onClick:u=>C(l),class:"btn btn-outline mr-3"},"Edit",8,ae),e("button",{onClick:u=>L(l.id),class:"btn text-white btn-error"},"Delete",8,ue)])]))]))),128))])])):(r(),i("div",de," Please log in to view links. "))])]),x(D)],64))}};export{ve as default};
